backend:
  name: git-gateway
  branch: main

# On supprime les media_folder et public_folder généraux qui créaient le conflit.
# Le CMS se basera uniquement sur les instructions données dans chaque champ d'image.

collections:
  - name: "evenements"
    label: "Événements"
    folder: "_evenements"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    extension: "json"
    fields:
      - {label: "Titre", name: "titre", widget: "string"}
      - {label: "Date et Heure", name: "date", widget: "datetime"}
      - {label: "Lieu", name: "lieu", widget: "string"}
      - {label: "Tarif", name: "tarif", widget: "string", required: false}
      - {label: "Description (avant l'événement)", name: "description", widget: "text"}
      - {label: "Compte-rendu (après l'événement)", name: "compte_rendu", widget: "markdown", required: false}
      - label: "Photos de l'événement"
        name: "photos"
        widget: "list"
        required: false
        fields:
          - label: "Image"
            name: "image"
            widget: "image"
            # C'est maintenant la seule instruction que le CMS a pour ces images.
            media_folder: "image/archive"
            public_folder: "/image/archive"
          - {label: "Légende", name: "legende", widget: "string", required: false}

  - name: "permanences"
    label: "Permanences"
    folder: "_permanences"
    create: true
    slug: "{{slug}}"
    extension: "json"
    fields:
      - {label: "Titre", name: "titre", widget: "string"}
      - {label: "Jour de la semaine", name: "jour", widget: "string"}
      - {label: "Heure", name: "heure", widget: "string"}
      - {label: "Lieu", name: "lieu", widget: "string"}
      - {label: "Description", name: "description", widget: "text"}
